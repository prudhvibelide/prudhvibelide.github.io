import React, { useState, useEffect } from 'react';
import { Search, Plus, Menu, Home, Calendar, FileText, Package, AlertCircle, Phone, Users, Settings, ChevronDown, Edit, Trash2, Filter, Download } from 'lucide-react';

const ConferenceServicesDesk = () => {
  const [activeTab, setActiveTab] = useState('desk-log');
  const [searchTerm, setSearchTerm] = useState('');
  const [filterBuilding, setFilterBuilding] = useState('all');
  const [showAddModal, setShowAddModal] = useState(false);
  const [currentList, setCurrentList] = useState('desk-log');

  // Sample data - in SharePoint, this would come from lists
  const [deskLogs, setDeskLogs] = useState([
    { id: 1, date: '6/14/2024', author: 'Grace Smith', building: 'Abel North', note: 'All vending machines go out of order, the service number to call is (402) 423-7335', status: 'FYI', year: '2024' },
    { id: 2, date: '6/5/2024', author: 'Atley Van Emmerk', building: 'Abel North', note: 'Linen Package Materials = Basic: Sheets, pillow, pillowcase. Extended (VIP): Basic + blanket, towel, and daily towel exchange', status: 'FYI', year: '2024' },
    { id: 3, date: '5/30/2024', author: 'Nicole Gibson', building: 'Abel North', note: 'The FA\'s, CA\'s, anyone working here cannot take items meant to be checked out, without checking them out. Employees have been coming through the back to help themselves to the things here, without checking out items.', status: 'FYI', year: '2024' },
  ]);

  const [equipmentLog, setEquipmentLog] = useState([
    { id: 1, guest: 'Jacob Lindblom', group: 'FOCUS', item: 'Ping pong paddle (2) and balls', building: 'Abel North', room: '715', dateOut: '6/8/2024 6:42 AM', checkOut: 'Ash B', status: 'Broken', dateIn: '6/8/2024 7:06 AM', checkIn: 'Ash B', notes: 'Stepped on the ball and cracked it', year: '2024' },
    { id: 2, guest: 'Elisa Foley', group: 'student', item: 'HDMI CORD', building: 'Abel North', room: 'ABELNO-0211-A1', dateOut: '6/9/2024 8:09 AM', checkOut: 'Angel Cavazos', status: 'In Use', year: '2024' },
    { id: 3, guest: 'Ryleigh Lindstrom', group: 'FA', item: 'cart', building: 'Abel North', room: '238', dateOut: '7/18/2024 3:29 PM', checkOut: 'Carrie Wehrman', status: 'In Use', year: '2024' },
  ]);

  const [lostFound, setLostFound] = useState([
    { id: 1, item: 'Bronze Key', type: 'Lost', date: '8/3/2024 8:00 PM', building: 'Abel North', where: 'Unknown', guest: 'Madiha Munawar', address: 'worked at Abel C Store', phone: '3083400310', status: 'Unknown', year: '2024' },
    { id: 2, item: '1 gold key labeled BB70', type: 'Found', date: '8/3/2024 5:15 PM', building: 'Abel North', where: 'Abel Welcome Center', guest: 'Morgan King', status: 'At Desk', year: '2024' },
    { id: 3, item: '2 silver keys', type: 'Found', date: '7/25/2024 3:15 PM', building: 'Abel North', where: 'East walkway in abel welcome center', guest: 'Kristen Nieves', status: 'At Desk', year: '2024' },
  ]);

  const [packages, setPackages] = useState([]);

  const buildings = ['Abel North', 'Abel South', 'Central Housing', 'Colonial Terrace', 'Courtyards', 'Eastside', 'Harper', 'Husker'];

  const getActiveData = () => {
    switch(activeTab) {
      case 'desk-log': return deskLogs;
      case 'equipment': return equipmentLog;
      case 'lost-found': return lostFound;
      case 'packages': return packages;
      default: return [];
    }
  };

  const filteredData = getActiveData().filter(item => {
    const matchesSearch = searchTerm === '' || 
      Object.values(item).some(val => 
        String(val).toLowerCase().includes(searchTerm.toLowerCase())
      );
    const matchesBuilding = filterBuilding === 'all' || item.building === filterBuilding;
    return matchesSearch && matchesBuilding;
  });

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div className="px-6 py-3 flex items-center justify-between">
          <div className="flex items-center gap-4">
            <div className="w-10 h-10 bg-red-600 flex items-center justify-center text-white font-bold text-xl">
              N
            </div>
            <div>
              <h1 className="text-2xl font-light text-gray-800">Conference Services eDesk</h1>
              <p className="text-xs text-gray-500">University Housing & Conference Services</p>
            </div>
          </div>
          <div className="flex items-center gap-4">
            <div className="relative">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
              <input
                type="text"
                placeholder="Search this site"
                className="pl-10 pr-4 py-2 border border-gray-300 rounded-md w-80 focus:outline-none focus:ring-2 focus:ring-red-500"
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
            </div>
            <button className="p-2 hover:bg-gray-100 rounded">
              <Settings className="w-5 h-5 text-gray-600" />
            </button>
          </div>
        </div>
      </header>

      <div className="flex">
        {/* Sidebar */}
        <aside className="w-64 bg-white border-r border-gray-200 min-h-screen p-4">
          <nav className="space-y-1">
            <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
              <Home className="w-4 h-4" />
              Home
            </button>
            <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
              <Calendar className="w-4 h-4" />
              eDesk Calendar
            </button>
            
            <div className="pt-4">
              <p className="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Documents</p>
              <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
                <FileText className="w-4 h-4" />
                Desk Handouts
              </button>
              <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
                <FileText className="w-4 h-4" />
                Desk Procedures
              </button>
              <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
                <FileText className="w-4 h-4" />
                Duty Rooms
              </button>
            </div>

            <div className="pt-4">
              <p className="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Services</p>
              <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
                <AlertCircle className="w-4 h-4" />
                Lost and Found
              </button>
              <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
                <Phone className="w-4 h-4" />
                Phone List
              </button>
              <button className="w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded">
                <Users className="w-4 h-4" />
                Staff Meetings
              </button>
            </div>
          </nav>
        </aside>

        {/* Main Content */}
        <main className="flex-1 p-6">
          {/* Tabs */}
          <div className="bg-white rounded-lg shadow-sm mb-6">
            <div className="border-b border-gray-200">
              <div className="flex gap-1 px-6">
                <button
                  onClick={() => setActiveTab('desk-log')}
                  className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${
                    activeTab === 'desk-log'
                      ? 'border-red-600 text-red-600'
                      : 'border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300'
                  }`}
                >
                  Desk Log
                </button>
                <button
                  onClick={() => setActiveTab('equipment')}
                  className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${
                    activeTab === 'equipment'
                      ? 'border-red-600 text-red-600'
                      : 'border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300'
                  }`}
                >
                  Equipment Check Out
                </button>
                <button
                  onClick={() => setActiveTab('lost-found')}
                  className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${
                    activeTab === 'lost-found'
                      ? 'border-red-600 text-red-600'
                      : 'border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300'
                  }`}
                >
                  Lost and Found
                </button>
                <button
                  onClick={() => setActiveTab('packages')}
                  className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${
                    activeTab === 'packages'
                      ? 'border-red-600 text-red-600'
                      : 'border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300'
                  }`}
                >
                  Packages
                </button>
              </div>
            </div>

            {/* Toolbar */}
            <div className="p-4 border-b border-gray-200 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <button 
                  onClick={() => setShowAddModal(true)}
                  className="flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm font-medium"
                >
                  <Plus className="w-4 h-4" />
                  New Item
                </button>
                <select
                  value={filterBuilding}
                  onChange={(e) => setFilterBuilding(e.target.value)}
                  className="px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-red-500"
                >
                  <option value="all">All Buildings</option>
                  {buildings.map(building => (
                    <option key={building} value={building}>{building}</option>
                  ))}
                </select>
              </div>
              <div className="flex items-center gap-2">
                <button className="p-2 hover:bg-gray-100 rounded" title="Export">
                  <Download className="w-4 h-4 text-gray-600" />
                </button>
                <button className="p-2 hover:bg-gray-100 rounded" title="Filter">
                  <Filter className="w-4 h-4 text-gray-600" />
                </button>
              </div>
            </div>

            {/* Content Area */}
            <div className="p-6">
              {activeTab === 'desk-log' && (
                <div className="space-y-4">
                  <h2 className="text-lg font-semibold text-gray-800 mb-4">Desk Log</h2>
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead>
                        <tr className="border-b border-gray-200 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                          <th className="pb-3 pr-4">Date</th>
                          <th className="pb-3 pr-4">Author</th>
                          <th className="pb-3 pr-4">Building</th>
                          <th className="pb-3 pr-4">Note</th>
                          <th className="pb-3 pr-4">Status</th>
                          <th className="pb-3">Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        {filteredData.map((log) => (
                          <tr key={log.id} className="border-b border-gray-100 hover:bg-gray-50">
                            <td className="py-3 pr-4 text-sm text-gray-700">{log.date}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{log.author}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{log.building}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700 max-w-md">{log.note}</td>
                            <td className="py-3 pr-4">
                              <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                {log.status}
                              </span>
                            </td>
                            <td className="py-3">
                              <div className="flex gap-2">
                                <button className="p-1 hover:bg-gray-200 rounded">
                                  <Edit className="w-4 h-4 text-gray-600" />
                                </button>
                                <button className="p-1 hover:bg-gray-200 rounded">
                                  <Trash2 className="w-4 h-4 text-gray-600" />
                                </button>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}

              {activeTab === 'equipment' && (
                <div className="space-y-4">
                  <h2 className="text-lg font-semibold text-gray-800 mb-4">Equipment Check Out Log</h2>
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead>
                        <tr className="border-b border-gray-200 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                          <th className="pb-3 pr-4">Guest</th>
                          <th className="pb-3 pr-4">Group</th>
                          <th className="pb-3 pr-4">Item</th>
                          <th className="pb-3 pr-4">Building</th>
                          <th className="pb-3 pr-4">Room</th>
                          <th className="pb-3 pr-4">Date/Time Out</th>
                          <th className="pb-3 pr-4">Status</th>
                          <th className="pb-3">Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        {filteredData.map((item) => (
                          <tr key={item.id} className="border-b border-gray-100 hover:bg-gray-50">
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.guest}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.group}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.item}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.building}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.room}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.dateOut}</td>
                            <td className="py-3 pr-4">
                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                                item.status === 'In Use' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                              }`}>
                                {item.status}
                              </span>
                            </td>
                            <td className="py-3">
                              <div className="flex gap-2">
                                <button className="p-1 hover:bg-gray-200 rounded">
                                  <Edit className="w-4 h-4 text-gray-600" />
                                </button>
                                <button className="p-1 hover:bg-gray-200 rounded">
                                  <Trash2 className="w-4 h-4 text-gray-600" />
                                </button>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}

              {activeTab === 'lost-found' && (
                <div className="space-y-4">
                  <h2 className="text-lg font-semibold text-gray-800 mb-4">Lost and Found Log</h2>
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead>
                        <tr className="border-b border-gray-200 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                          <th className="pb-3 pr-4">Item</th>
                          <th className="pb-3 pr-4">Lost/Found</th>
                          <th className="pb-3 pr-4">Date</th>
                          <th className="pb-3 pr-4">Building</th>
                          <th className="pb-3 pr-4">Where</th>
                          <th className="pb-3 pr-4">Guest Name</th>
                          <th className="pb-3 pr-4">Phone</th>
                          <th className="pb-3 pr-4">Status</th>
                          <th className="pb-3">Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        {filteredData.map((item) => (
                          <tr key={item.id} className="border-b border-gray-100 hover:bg-gray-50">
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.item}</td>
                            <td className="py-3 pr-4">
                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                                item.type === 'Found' ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'
                              }`}>
                                {item.type}
                              </span>
                            </td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.date}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.building}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.where}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.guest}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.phone}</td>
                            <td className="py-3 pr-4 text-sm text-gray-700">{item.status}</td>
                            <td className="py-3">
                              <div className="flex gap-2">
                                <button className="p-1 hover:bg-gray-200 rounded">
                                  <Edit className="w-4 h-4 text-gray-600" />
                                </button>
                                <button className="p-1 hover:bg-gray-200 rounded">
                                  <Trash2 className="w-4 h-4 text-gray-600" />
                                </button>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}

              {activeTab === 'packages' && (
                <div className="text-center py-12">
                  <Package className="w-16 h-16 text-gray-400 mx-auto mb-4" />
                  <h3 className="text-lg font-medium text-gray-700 mb-2">No packages to show</h3>
                  <p className="text-gray-500 mb-4">Start by adding a new package entry</p>
                  <button 
                    onClick={() => setShowAddModal(true)}
                    className="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm font-medium"
                  >
                    Add Package
                  </button>
                </div>
              )}
            </div>
          </div>
        </main>
      </div>
    </div>
  );
};

export default ConferenceServicesDesk;